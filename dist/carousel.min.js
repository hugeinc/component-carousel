var Carousel=function(){"use strict";var i=function(i,t){var s=this;void 0===t&&(t={}),this.handle=i,this.options={animateClass:"animate",activeClass:"active",slideWrap:"ul",slides:"li",infinite:!0,display:1,disableDragging:!1,initialIndex:0},this.current=0,this.slides=[],this.sliding=!1,this.cloned=0,this.active=!0,this.dragging=!1,this.dragThreshold=50,this.deltaX=0,this.isTouch="ontouchend"in document,["transform","webkitTransform","MozTransform","OTransform","msTransform"].forEach(function(i){void 0!==document.body.style[i]&&(s.transform=i)}),this.options=Object.assign(this.options,t),this.init()};return i.prototype.init=function(){var i=this;return this.slideWrap=this.handle.querySelector(this.options.slideWrap),this.slides=this.slideWrap.querySelectorAll(this.options.slides),this.numSlides=this.slides.length,this.current=this.options.initialIndex,!this.slideWrap||!this.slides||this.numSlides<this.options.display?(console.log("Carousel: insufficient # slides"),this.active=!1):(this.options.infinite&&this._cloneSlides(),this._createBindings(),this._getDimensions(),this.go(this.current,!1),this.options.disableDragging||(this.isTouch?["touchstart","touchmove","touchend","touchcancel"].map(function(t){i.handle.addEventListener(t,i._bindings[t])}):["mousedown","mousemove","mouseup","mouseleave","click"].map(function(t){i.handle.addEventListener(t,i._bindings[t])})),window.addEventListener("resize",this._bindings.resize),window.addEventListener("orientationchange",this._bindings.orientationchange),this)},i.prototype.destroy=function(){var i=this;for(var t in this._bindings)i.handle.removeEventListener(t,i._bindings[t]);window.removeEventListener("resize",this._bindings.resize),window.removeEventListener("orientationchange",this._bindings.orientationchange),this._bindings=null,this.options=this.slides=this.slideWrap=this.handle=null,this.active=!1},i.prototype.next=function(){this.options.infinite||this.current!==this.numSlides-1?this.go(this.current+1):this.go(this.numSlides-1)},i.prototype.prev=function(){this.options.infinite||0!==this.current?this.go(this.current-1):this.go(0)},i.prototype.go=function(i,t){void 0===t&&(t=!0);var s=this.options;if(!this.sliding&&this.active){if(i<0||i>=this.numSlides){var e=i<0?this.current+this.numSlides:this.current-this.numSlides;this._slide(-(e*this.width-this.deltaX)),this.slideWrap.offsetHeight}i=this._loop(i),this._slide(-i*this.width,t),s.onSlide&&s.onSlide.call(this,i,this.current),this._removeClass(this.slides[this.current],s.activeClass),this._addClass(this.slides[i],s.activeClass),this.current=i}},i.prototype._createBindings=function(){this._bindings={touchstart:this._dragStart.bind(this),touchmove:this._drag.bind(this),touchend:this._dragEnd.bind(this),touchcancel:this._dragEnd.bind(this),mousedown:this._dragStart.bind(this),mousemove:this._drag.bind(this),mouseup:this._dragEnd.bind(this),mouseleave:this._dragEnd.bind(this),click:this._checkDragThreshold.bind(this),resize:this._updateView.bind(this),orientationchange:this._updateView.bind(this)}},i.prototype._checkDragThreshold=function(i){this.dragThresholdMet&&i.preventDefault()},i.prototype._dragStart=function(i){var t;if(this.sliding)return!1;i=i.originalEvent||i,t=void 0!==i.touches&&i.touches,this.dragThresholdMet=!1,this.dragging=!0,this.startClientX=t?t[0].pageX:i.clientX,this.startClientY=t?t[0].pageY:i.clientY,this.deltaX=0,this.deltaY=0,"IMG"!==i.target.tagName&&"A"!==i.target.tagName||(i.target.draggable=!1)},i.prototype._drag=function(i){var t;this.dragging&&(i=i.originalEvent||i,t=void 0!==i.touches&&i.touches,this.deltaX=(t?t[0].pageX:i.clientX)-this.startClientX,this.deltaY=(t?t[0].pageY:i.clientY)-this.startClientY,this._slide(-(this.current*this.width-this.deltaX)),this.dragThresholdMet=Math.abs(this.deltaX)>this.dragThreshold)},i.prototype._dragEnd=function(i){this.dragging&&(this.dragThresholdMet&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()),this.dragging=!1,0!==this.deltaX&&Math.abs(this.deltaX)<this.dragThreshold?this.go(this.current):this.deltaX>0?this.prev():this.deltaX<0&&this.next(),this.deltaX=0)},i.prototype._slide=function(i,t){var s=this;i-=this.offset,t&&(this.sliding=!0,this._addClass(this.slideWrap,this.options.animateClass),setTimeout(function(){s.sliding=!1,s._removeClass(s.slideWrap,s.options.animateClass)},400)),this.transform?this.slideWrap.style[this.transform]="translate3d("+i+"px, 0, 0)":this.slideWrap.style.left=i+"px"},i.prototype._loop=function(i){return(this.numSlides+i%this.numSlides)%this.numSlides},i.prototype._getDimensions=function(){this.width=this.slides[0].getBoundingClientRect().width,this.offset=this.cloned*this.width},i.prototype._updateView=function(){var i=this;window.innerWidth!==this._viewport&&(this._viewport=window.innerWidth,clearTimeout(this.timer),this.timer=setTimeout(function(){i._getDimensions(),i.go(i.current)},300))},i.prototype._cloneSlides=function(){for(var i,t=this,s=this.options.display,e=Math.max(this.numSlides-s,0),n=Math.min(s,this.numSlides),h=this.numSlides;h>e;h--)i=t.slides[h-1].cloneNode(!0),i.removeAttribute("id"),i.setAttribute("aria-hidden","true"),t._addClass(i,"clone"),t.slideWrap.insertBefore(i,t.slideWrap.firstChild),t.cloned++;for(var o=0;o<n;o++)i=t.slides[o].cloneNode(!0),i.removeAttribute("id"),i.setAttribute("aria-hidden","true"),t._addClass(i,"clone"),t.slideWrap.appendChild(i)},i.prototype._addClass=function(i,t){i.classList?i.classList.add(t):i.className+=" "+t},i.prototype._removeClass=function(i,t){i.classList?i.classList.remove(t):i.className=i.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},i}();
